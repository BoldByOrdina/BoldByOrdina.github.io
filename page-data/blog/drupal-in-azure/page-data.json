{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/drupal-in-azure/","result":{"data":{"site":{"siteMetadata":{"title":"Ordina Bold Tech & Design Blog","configs":{"countOfInitialPost":10}}},"markdownRemark":{"id":"50619f6a-be4b-5658-8c41-990216d5c06e","excerpt":"For a client assignment we were in need of a headless CMS running on Azure.\nWe chose Drupal 9, which we deployed within the client’s Azure environment via a DevOps flow.\nBelow you can find step by step how we pulled this off. Setup Database First of all, we need a database.\nIf we…","html":"<p>For a client assignment we were in need of a headless CMS running on Azure.\nWe chose Drupal 9, which we deployed within the client’s Azure environment via a DevOps flow.\nBelow you can find step by step how we pulled this off.</p>\n<h2 id=\"setup\" style=\"position:relative;\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<h3 id=\"database\" style=\"position:relative;\"><a href=\"#database\" aria-label=\"database permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database</h3>\n<p>First of all, we need a database.\nIf we start looking at the recommended system requirements for Drupal’s database, we see that Drupal runs best on a MySQL database.\nFor this reason, we opted for an Azure Database for MySQL server.\nThis is a managed database service within Azure that allows us to manage MySQL databases in the cloud without having to worry about maintenance on this server.\nA Standard_B1ms with 20Gb of storage was chosen here.</p>\n<p>Once this database server has been created within Azure, it’s just a matter of creating a database.\nNext, through the “Server parameters”, turn off the “require_secure_transport” parameter.\nWith this setting you turn off the mandatory SSL connection you need to make with your database server.\nNOTE: it is a best practice to always use an SSL connection between a database server and a client application!\nSetting up an SSL connection would take us too far for this tutorial.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQoz22S207DMAyG+/7vhgRI3IA0RkfTJmkbN02PSfojm20IRKRPPuZku5imCSEE7PuOZVnA9rJFGL+itRbOORhjQORAS4btCcZorOsKXsdx/KJIKYERR07IcUdKGeue5ALeOM+zyJ392yaXxhhlT875jhyolEJZlqiUwrkyeK80tDbyCq01+r4HEYmslULXdeidg7VWXs4/YJtlXdcoVPWJWlVCaQgn1UnyFDzC6EGuF/xAGMjBk7vLafR3f/CD5BeNC6jbAZV1aNpvLk0rPksBTTdA916wNEH3I5rOi99I3F/jI4wLKF4qj8dTg8eTwdPZ4vls8fCm8NqM+PQZJSV8uB0lRZzaRfTLkHEZEsohiRSdkuQUc/Dgb1ujYZoaOe34WYeQU0TcVpTnd8zTCCDjyFGayIC55hY8Mrfit20rOhc+5+8Opmv3tm2TonPHufs32OaGsH4fG07mMeBZZP4bCYZjtzH7yy3nC0y4sxrd51M8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Require secure transport setting\"\n        title=\"Require secure transport setting\"\n        src=\"/static/9c336aa0fe5bc39229e0af130610775d/a1792/secure-transport.png\"\n        srcset=\"/static/9c336aa0fe5bc39229e0af130610775d/cb9a0/secure-transport.png 195w,\n/static/9c336aa0fe5bc39229e0af130610775d/727ba/secure-transport.png 390w,\n/static/9c336aa0fe5bc39229e0af130610775d/a1792/secure-transport.png 780w,\n/static/9c336aa0fe5bc39229e0af130610775d/d9217/secure-transport.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Require secure transport setting</p></figcaption>\n  </figure></p>\n<p>The last step is to check “Allow public access from any Azure service within Azure to this server” in the networking settings under the firewall rules.\nOtherwise Drupal will not be able to connect to this server (see below).</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.641025641025646%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAzklEQVQY01XNTVLEIBAF4Nz/Vt7AnwWrUbMwGS2YAAG6CYFnAYnOUPUVj6ZpBikl5usVWi8gIoQQ4L3/45x7qJ257k3c4eKOLSXUNaSNkVIEM7eBTASi3kzHYz4+qpj7PR+9PiasvGPbjoHftuT5FvNiKd8sN8pQc55PUocsDWVpaqaWHSP7iLwysqWSh1EljD+EWXlMKmBWAZN0+JIOU6v5XqtZOigTOt05LvDx3/B0seLlQ4nXz6V5G83dro+sxfP7Ii7zKoAiANwpD34Bc1d8uvvBq0UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Firewall settings\"\n        title=\"Firewall settings\"\n        src=\"/static/19911cfa2ed55683be2ac56c63b2e3db/a1792/firewall.png\"\n        srcset=\"/static/19911cfa2ed55683be2ac56c63b2e3db/cb9a0/firewall.png 195w,\n/static/19911cfa2ed55683be2ac56c63b2e3db/727ba/firewall.png 390w,\n/static/19911cfa2ed55683be2ac56c63b2e3db/a1792/firewall.png 780w,\n/static/19911cfa2ed55683be2ac56c63b2e3db/d9217/firewall.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Firewall settings</p></figcaption>\n  </figure></p>\n<h3 id=\"web-app-php-vs-container\" style=\"position:relative;\"><a href=\"#web-app-php-vs-container\" aria-label=\"web app php vs container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web app: PHP vs container</h3>\n<p>To setup our intranet with Drupal 9, we are working with a container-based web app.\nWe first tried to use a standard Azure PHP 8.0 web app.\nAfter extensive testing of this web app, we abandoned this track. The default PHP 8.0 app you get from Azure is just slow. Moreover, in Azure, a PHP 8.0 app is by default shipped with nginx instead of Apache.\nThis also prevented us from using <code class=\"language-text\">.htaccess</code>.\nFurther configuration and optimizing this web app just took too much time.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.923076923076923%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAgUlEQVQI122O2QrDMAwE8/9fWiiWLR+N7ykKIX3pioFFD8MeqsqnFCx77weLpEbUREmFGCLBK0kTOZWre/G0s7HXZs3FWpvDhM45Ss4/qd2GKBF5e2ZbjDoZ7abO6zfvbvRzUEszYUBEEOcYvT9SyytUNCj1rOSU6a2z5r3mD7b0C/l06j0nCVTYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Web app: PHP 8.0\"\n        title=\"Web app: PHP 8.0\"\n        src=\"/static/d13107272f2bd38f3ac2f63ba9fec7e0/a1792/php-8.png\"\n        srcset=\"/static/d13107272f2bd38f3ac2f63ba9fec7e0/cb9a0/php-8.png 195w,\n/static/d13107272f2bd38f3ac2f63ba9fec7e0/727ba/php-8.png 390w,\n/static/d13107272f2bd38f3ac2f63ba9fec7e0/a1792/php-8.png 780w,\n/static/d13107272f2bd38f3ac2f63ba9fec7e0/d9217/php-8.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Web app: PHP 8.0</p></figcaption>\n  </figure></p>\n<p>The advantage of deploying a docker container is that we can start from the official Drupal docker image.</p>\n<h3 id=\"container-registry\" style=\"position:relative;\"><a href=\"#container-registry\" aria-label=\"container registry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Container registry</h3>\n<p>Before we can proceed with creating our (container) web app within Azure, we first need a container registry.\nYou can easily create this through the Azure portal.\nThrough the container registry we can easily manage our own Docker images.\nOnce the container registry is set up, we can start creating our own Dockerfile within our own Drupal code base.\nAs mentioned before, we start from the <a href=\"https://github.com/docker-library/drupal/blob/master/9.3/php8.0/apache-bullseye/Dockerfile\">official Drupal Dockerfile</a>.\nHowever, when we look at this file we see on line 75 that a composer command is executed that does a clean install of Drupal.\nThis does not take into account any additional modules, themes or libraries that need to be installed. We therefore modify the Docker file as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> php:8.0-apache-bullseye</span>\n\n<span class=\"token comment\"># install the PHP extensions we need</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> set -eux; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tif command -v a2enmod; then <span class=\"token operator\">\\</span>\n\t\ta2enmod rewrite; <span class=\"token operator\">\\</span>\n\tfi; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tsavedAptMark=<span class=\"token string\">\"$(apt-mark showmanual)\"</span>; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tapt-get update; <span class=\"token operator\">\\</span>\n\tapt-get install -y --no-install-recommends <span class=\"token operator\">\\</span>\n\t\tlibfreetype6-dev <span class=\"token operator\">\\</span>\n\t\tlibjpeg-dev <span class=\"token operator\">\\</span>\n\t\tlibpng-dev <span class=\"token operator\">\\</span>\n\t\tlibpq-dev <span class=\"token operator\">\\</span>\n\t\tlibwebp-dev <span class=\"token operator\">\\</span>\n\t\tlibzip-dev <span class=\"token operator\">\\</span>\n\t; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tdocker-php-ext-configure gd <span class=\"token operator\">\\</span>\n\t\t--with-freetype <span class=\"token operator\">\\</span>\n\t\t--with-jpeg=/usr <span class=\"token operator\">\\</span>\n\t\t--with-webp <span class=\"token operator\">\\</span>\n\t; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tdocker-php-ext-install -j <span class=\"token string\">\"$(nproc)\"</span> <span class=\"token operator\">\\</span>\n\t\tgd <span class=\"token operator\">\\</span>\n\t\topcache <span class=\"token operator\">\\</span>\n\t\tpdo_mysql <span class=\"token operator\">\\</span>\n\t\tpdo_pgsql <span class=\"token operator\">\\</span>\n\t\tzip <span class=\"token operator\">\\</span>\n\t; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n<span class=\"token comment\"># reset apt-mark's \"manual\" list so that \"purge --auto-remove\" will remove all build dependencies</span>\n\tapt-mark auto <span class=\"token string\">'.*'</span> > /dev/null; <span class=\"token operator\">\\</span>\n\tapt-mark manual <span class=\"token variable\">$savedAptMark</span>; <span class=\"token operator\">\\</span>\n\tldd <span class=\"token string\">\"$(php -r 'echo ini_get(\"</span>extension_dir<span class=\"token string\">\");')\"</span>/*.so <span class=\"token operator\">\\</span>\n\t\t| awk <span class=\"token string\">'/=>/ { print $3 }'</span> <span class=\"token operator\">\\</span>\n\t\t| sort -u <span class=\"token operator\">\\</span>\n\t\t| xargs -r dpkg-query -S <span class=\"token operator\">\\</span>\n\t\t| cut -d: -f1 <span class=\"token operator\">\\</span>\n\t\t| sort -u <span class=\"token operator\">\\</span>\n\t\t| xargs -rt apt-mark manual; <span class=\"token operator\">\\</span>\n\t<span class=\"token operator\">\\</span>\n\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; <span class=\"token operator\">\\</span>\n\trm -rf /var/lib/apt/lists/*</span>\n\n<span class=\"token comment\"># try to fix 502 errors on file storage files</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -f /etc/apache2/apache2.conf</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> container-content/apache2.conf /etc/apache2/apache2.conf</span>\n\n<span class=\"token comment\"># set recommended PHP.ini settings</span>\n<span class=\"token comment\"># see https://secure.php.net/manual/en/opcache.installation.php</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> { <span class=\"token operator\">\\</span>\n\t\techo <span class=\"token string\">'opcache.memory_consumption=128'</span>; <span class=\"token operator\">\\</span>\n\t\techo <span class=\"token string\">'opcache.interned_strings_buffer=8'</span>; <span class=\"token operator\">\\</span>\n\t\techo <span class=\"token string\">'opcache.max_accelerated_files=4000'</span>; <span class=\"token operator\">\\</span>\n\t\techo <span class=\"token string\">'opcache.revalidate_freq=60'</span>; <span class=\"token operator\">\\</span>\n\t\techo <span class=\"token string\">'opcache.fast_shutdown=1'</span>; <span class=\"token operator\">\\</span>\n\t} > /usr/local/etc/php/conf.d/opcache-recommended.ini</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">composer:2</span></span> /usr/bin/composer /usr/local/bin/</span>\n\n<span class=\"token comment\"># https://www.drupal.org/node/3060/release</span>\n<span class=\"token comment\"># ENV DRUPAL_VERSION 9.3.11</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /opt/drupal</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> composer.json ./composer.json</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> web ./web</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm  -f /opt/drupal/web/sites/default/settings.php</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -rf /opt/drupal/web/sites/default/files</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> set -eux; <span class=\"token operator\">\\</span>\n  export COMPOSER_HOME=<span class=\"token string\">\"$(mktemp -d)\"</span>; <span class=\"token operator\">\\</span>\n  composer install; <span class=\"token operator\">\\</span>\n\tchown -R www-data:www-data web/sites web/modules web/themes; <span class=\"token operator\">\\</span>\n  mkdir web/sites/default/files; <span class=\"token operator\">\\</span>\n  chmod 775 web/sites/default/files</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> container-content/settings.php ./web/sites/default/settings.php</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> rm -rf /opt/drupal/web/.htaccess</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> container-content/.htpasswd ./web/.htpasswd</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> container-content/.htaccess ./web/.htaccess</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span>\tchmod 444 web/sites/default/settings.php; <span class=\"token operator\">\\</span>\n  rmdir /var/www/html; <span class=\"token operator\">\\</span>\n\tln -sf /opt/drupal/web /var/www/html; <span class=\"token operator\">\\</span>\n\t<span class=\"token comment\"># delete composer cache</span>\n\trm -rf <span class=\"token string\">\"$COMPOSER_HOME\"</span></span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PATH=<span class=\"token variable\">${PATH}</span>:/opt/drupal/vendor/bin</span></code></pre></div>\n<p>We adjusted the following:\nFrom lines 50-52 we remove the existing apache2 configuration that comes along from the official Drupal Docker image and replace it with our own apache2 configuration.\nThis is to later solve the problem of 502 errors we get on files coming from an Azure file share (see below).</p>\n<p>From line 70 we copy our own composer.json and own web folder.\nNext we delete the default settings file and files folder and then run the composer install command after which the files folder is recreated with appropriate permissions.\nFinally we copy our own settings.php file and give it the appropriate permissions.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$databases</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'hash_salt'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'7ztAEHLuq0o9fN0u7SALe6BVVUVxbKsXRZej4pbye6xQNTwJkrXiF955K3DggUAk6YWgtkPt3A'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'update_free_access'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">FALSE</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'container_yamls'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app_root</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/'</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$site_path</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'/services.yml'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file_scan_ignore_directories'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string single-quoted-string\">'node_modules'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'bower_components'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'entity_update_batch_size'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'entity_update_backup'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">TRUE</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$settings</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'migrate_node_migrate_type_classic'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">FALSE</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$databases</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'default'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token string single-quoted-string\">'database'</span> <span class=\"token operator\">=></span> <span class=\"token function\">getenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DB_DATABASE'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'username'</span> <span class=\"token operator\">=></span> <span class=\"token function\">getenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DB_USER'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token function\">getenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DB_PASSWORD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'prefix'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'host'</span> <span class=\"token operator\">=></span> <span class=\"token function\">getenv</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DB_HOST'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'port'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'3306'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'namespace'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Drupal\\\\Core\\\\Database\\\\Driver\\\\mysql'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string single-quoted-string\">'driver'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'mysql'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>In the settings file, we place environment variables at the database connection.\nWe set these variables later when we configure our (container) web app.</p>\n<h3 id=\"build-docker-image\" style=\"position:relative;\"><a href=\"#build-docker-image\" aria-label=\"build docker image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build Docker Image</h3>\n<p>Now that we have our Dockerfile, it’s a matter of building an image of this and pushing it to our previously created container registry.</p>\n<p>Run the following command to build the image locally:\n{code}\ndocker build –tag drupal-on-azure-custom-image .\n{/code}</p>\n<h3 id=\"push-image-to-container-registry\" style=\"position:relative;\"><a href=\"#push-image-to-container-registry\" aria-label=\"push image to container registry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Push image to Container Registry</h3>\n<p>You can enter the following commands through the cloud shell in the Azure portal.</p>\n<ol>\n<li>First, we need the credentials of the container registry</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">az acr credential show –resource-group drupalAzureRG –name &lt;registry-name&gt;</code></pre></div>\n<p><em>The JSON output of this command provides two passwords along with the registry’s user name.</em></p>\n<ol start=\"2\">\n<li>Then log in locally to the previously created container registry.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker login &lt;registry-name&gt;.azurecr.io --username &lt;registry-username&gt;</code></pre></div>\n<p><em>Replace <registry-name> and <registry-username> with values from the previous steps. When prompted, type in one of the passwords from the previous step.</em></p>\n<ol start=\"3\">\n<li>When the log in is successful, tag your local Docker image to the registry</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker tag appsvc-tutorial-custom-image &lt;registry-name&gt;.azurecr.io/ drupal-on-azure-custom-image:latest</code></pre></div>\n<ol start=\"4\">\n<li>Now push the image to the container registry</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker push &lt;registry-name&gt;.azurecr.io/drupal-on-azure-custom-image:latest</code></pre></div>\n<ol start=\"5\">\n<li>Verify that the push was successful</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">az acr repository list -n &lt;registry-name&gt;</code></pre></div>\n<p>The output should show the name of your image.</p>\n<h3 id=\"web-app\" style=\"position:relative;\"><a href=\"#web-app\" aria-label=\"web app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web app</h3>\n<p>Now that we have set up a container registry with our own docker image, we can move on to setting up our web app.</p>\n<p>You can create a web app easily through the Azure portal. When creating the web app, choose “Docker Container” from the publishing options.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.794871794871796%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWUlEQVQI112LAQqAMAwD/f9X6+hY27gpNLKBggaOkJBsZsYD4FRmvkwFDkYEi3W6O92MABYzt9Y4xvh8t1qryi66i+jZu5LUzFwufmkzV4RrKUUBrP7P3D/cNd2bKqSbH04AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Webapp publish settings\"\n        title=\"Webapp publish settings\"\n        src=\"/static/f393432b4571c519fe9dcb65e634cc08/a1792/webapp-publish-settings.png\"\n        srcset=\"/static/f393432b4571c519fe9dcb65e634cc08/cb9a0/webapp-publish-settings.png 195w,\n/static/f393432b4571c519fe9dcb65e634cc08/727ba/webapp-publish-settings.png 390w,\n/static/f393432b4571c519fe9dcb65e634cc08/a1792/webapp-publish-settings.png 780w,\n/static/f393432b4571c519fe9dcb65e634cc08/d9217/webapp-publish-settings.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Webapp publish settings</p></figcaption>\n  </figure></p>\n<p>Through the “Docker” tab, set “Azure Container Registry” to “Image Source”.\nThen you choose the previously created container registry (here boldDocsACR) and image (here drupal-docs). As “Tag” you can just choose “latest”.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVklEQVQoz5WS23KrMAxF8/8f2Ze0gWBjMPgiCTv7jAVJejr0oZ5Zsw3ybOvii4hg8gtSJoQQENYV27bBew9mBhEpLZZi1Nhv6/F44GKtxcf1hutXB2sNhmGAMQZd176t7sdxVG2xaZr0smVZdvyuzaytSzs4Tw5uHPWwc04Nuu6m9Pf+MLUw1iDGgEwZOb9JOaHWuhu2287W7Dz6rx7324DgAygxJAso8jdINfqIspXdcF1X7dH/vQDikuDdgnn0MHeLHAmFKwqXQ99I2lDLUXIrz7lRy2w9ayW39EstkE1U90uq/q+PE2p593C49xBmnWhDhDU4jRM+r5+qQgLODG5K/ANBCgmlHCVTSqc9nMwMc7NIPoOjgMI5HARpzijbMRQm2kupVTN7pj4bjzAlSNxAK4NWOeenYZtyI6X0Mmv6etQ5H/oLRPp0Xs/mmdV3s6f+lWb4D9ojWNJN1mj0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Require secure transport setting\"\n        title=\"Require secure transport setting\"\n        src=\"/static/2ac33e0b86fc227bdad28bfe2c342c3a/a1792/container-registry.png\"\n        srcset=\"/static/2ac33e0b86fc227bdad28bfe2c342c3a/cb9a0/container-registry.png 195w,\n/static/2ac33e0b86fc227bdad28bfe2c342c3a/727ba/container-registry.png 390w,\n/static/2ac33e0b86fc227bdad28bfe2c342c3a/a1792/container-registry.png 780w,\n/static/2ac33e0b86fc227bdad28bfe2c342c3a/d9217/container-registry.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Require secure transport setting</p></figcaption>\n  </figure></p>\n<p>Finally, you can click “Review + create.”\nYour web app is created. When your web app is created, you can find the public URL of your web app on the overview page of your new web app.\nIf you click on it, however, you get the following error message:</p>\n<p><strong>“The website encountered an unexpected error. Please try again later.”</strong></p>\n<p>You get this error message because Drupal cannot connect to a database. How can we fix this?</p>\n<h3 id=\"database-connection\" style=\"position:relative;\"><a href=\"#database-connection\" aria-label=\"database connection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database connection</h3>\n<p>Earlier, we created our own Dockerfile, which we then used to build an image that we pushed to our container registry.\nIn this Dockerfile, we copied our own settings.php file.\nThis settings file contains a database connection based on environment variables.\nThese environment variables are not known within our web app. Hence, our web app cannot connect to the database.</p>\n<p>Via “Configuration” > “Application Settings” you can add these environment variables.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.69230769230769%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABD0lEQVQoz5VSi27DIAzk/79yWqVUS0saCA9jTG4y6dJqiqrW0sEB5mywDVGCVIZIRVO0BioFKQYwF6it6/o2zDgXTAsjc4OPDJ8qQmZMLmGJpTtpkHdhTmPEYDPmhVAbUARoK8ANYMHHZk7fXxh/zjifB6QUQTkj57xx2niMsSOltPMQwr5+no0OIWxOMWX4JSCEBUG59/1irfUO2TkzP+0/YOw043q9wFoL5z0yUY9UZbus//LRkzU7/XgR6XiumJpmrtXfbO14WeVpmlDKoz3a/eBv1opfPcMlwS0KfBK09vD5D+Oc2wQPomk2xA02SBec74Kv+3AcQUSHDayCkQTDjXHxgtFV2EX27I8EfwHC3hGbxc529AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Application settings\"\n        title=\"Application settings\"\n        src=\"/static/5fd02baa6588ebe2688f5253ef279159/a1792/application-settings.png\"\n        srcset=\"/static/5fd02baa6588ebe2688f5253ef279159/cb9a0/application-settings.png 195w,\n/static/5fd02baa6588ebe2688f5253ef279159/727ba/application-settings.png 390w,\n/static/5fd02baa6588ebe2688f5253ef279159/a1792/application-settings.png 780w,\n/static/5fd02baa6588ebe2688f5253ef279159/d9217/application-settings.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Application settings</p></figcaption>\n  </figure></p>\n<p>The values of these variables can be found in your previously created database service.\nDo not forget to click on “Save”.\nThe application settings are updated now and your web app is restarting.\nWhen visiting the public URL of your web app again, you should see a Drupal installation screen.\nYou can now install Drupal as usual.</p>\n<h3 id=\"drupal-file-system\" style=\"position:relative;\"><a href=\"#drupal-file-system\" aria-label=\"drupal file system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Drupal file system</h3>\n<p>By default, Drupal stores its files in its own files-folder (<code class=\"language-text\">/sites/default/files</code>).\nThis files-folder is included in our Docker container and this is a problem.\nWhat if our web app crashes and we have to restart our docker container?\nRight, then we lose all our files.\nHow can we fix this?</p>\n<p>To start, we create a new storage account through the Azure portal.\nWithin this storage account, you then create a “File share”.\nI’ve named it “files-folder.”</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.38461538461538%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvElEQVQoz6WQ0Q7DIAhF/f8P7Utt1aq1gnIXWZN229O2m5wgGBCv4SYopaAQI+WM3jsuCV4lgMjt7onIhbF2wTRNsKtDqYTWRYcy8+u5DbrmrTVw6wpp7TbQOQc7z7A+Yo6EfDBSjAhbRKoCqhXbtinpYBAzUkpwO8OXBpsY3K9NTdl3RG0ICMEjeK/NRASiekb6yFmpGsej9cTknEFMeNfdl28wNhfMy4p6HFoYHv2DGd8fJo/k163uGz4AvyAm4w336xQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"File share settings\"\n        title=\"File share settings\"\n        src=\"/static/199b2adcd90a0c9f22bf974d23fd9418/a1792/file-share-settings.png\"\n        srcset=\"/static/199b2adcd90a0c9f22bf974d23fd9418/cb9a0/file-share-settings.png 195w,\n/static/199b2adcd90a0c9f22bf974d23fd9418/727ba/file-share-settings.png 390w,\n/static/199b2adcd90a0c9f22bf974d23fd9418/a1792/file-share-settings.png 780w,\n/static/199b2adcd90a0c9f22bf974d23fd9418/d9217/file-share-settings.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>File share settings</p></figcaption>\n  </figure></p>\n<p>Now we are going to set path mappings in our web app.\nYou do this through “Configuration” > “Path mappings”.\nHere you create a new “Azure Storage Mount” with your previously created “File Share”.\nThe “Mount path” is the path of the files folder in the Docker container.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.61538461538461%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtUlEQVQ4y31Ti27bMAz0///gEnTY2gSTbdl6WbJsS5ZuIBunyYJOwIHU68QjqWYcR4i2Rdu26LoOl8uF/ev1ypjnGf8btVa2pRTknNEYa9GJFsMwQCkFKSUT01yIlgnp8L7vDPKPOdlHYlprpmlCDOH15bLDaIWUEtZ1ZbttG5ZlYcQYef0xShoNbVBkzjlYa9kCFfNWIA1diliWFd57JvpOMllCQ5JInjEGWmu2NMJaIcaAOHuWrbVBCIEvHbIfye4RUkR930MbAzUM9409J8j+s1BCCMzBMwnJJpCyI+InQlokUoqCknpskn/kKdKZeUO6kR0FIrwQEhG1DuXvcdDhafKcAmMd3uV6T8tB9Ji7w28oL3SIqq2VQsn5s6/2hMlZzh1VGJVa5atlUs7cd/8WhyVbY7iKRFpur9uQ8PbeQXYCahzhnOUHjNHwk+OWUmrE5P1T+zQv5b/N/VJxHRY4HyG1x2A8RhMg1cSWoF1AjDM2UnAQUg/+EQKtEEjreiec14Lzx4jT+YLTT4Hzh8Tpd8/48atFZzPGUF8lf/s3a8WWK1IuSGR3PGHLBXmvdOGpKH8BB+nzOX+Y0YYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Azure storage mount\"\n        title=\"Azure storage mount\"\n        src=\"/static/8440e7d15644cd00291c9775432a9f65/a1792/azure-storage-mount.png\"\n        srcset=\"/static/8440e7d15644cd00291c9775432a9f65/cb9a0/azure-storage-mount.png 195w,\n/static/8440e7d15644cd00291c9775432a9f65/727ba/azure-storage-mount.png 390w,\n/static/8440e7d15644cd00291c9775432a9f65/a1792/azure-storage-mount.png 780w,\n/static/8440e7d15644cd00291c9775432a9f65/d9217/azure-storage-mount.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Azure storage mount</p></figcaption>\n  </figure></p>\n<p>Once you’ve added your path mapping, don’t forget to click “Save”.</p>\n<p>Now when you visit your web app URL, everything should still work as before.\nYour full styling may be gone, but that should be resolved when you clear the cache.</p>\n<h3 id=\"continuous-deployment\" style=\"position:relative;\"><a href=\"#continuous-deployment\" aria-label=\"continuous deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Continuous deployment</h3>\n<p>We currently have a web app running on a container image from our own container registry.\nHowever, our web app does not know when the image in the container registry is updated.\nThis means that every time we push a new version of our container image to the registry, we have to manually restart our web app so that it pulls in the latest new version of the image.\nWe can automate this process by turning on CI/CD so that our web app is notified when a new container image is available.</p>\n<ol>\n<li>Enable CI/CD in web app</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">az webapp deployment container config --enable-cd true --name &lt;app-name&gt; --resource-group myResourceGroup --query CI_CD_URL --output tsv</code></pre></div>\n<p><em>CI_CD_URL is a URL that the web app generates. The container registry must use this URL to notify the web app that a new image is available.</em></p>\n<ol start=\"2\">\n<li>Create webhook in container registry using CI_CD_URL</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">az acr webhook create --name &lt;name-of-webhook&gt;--registry &lt;registry-name&gt; --uri &#39;&lt;ci-cd-url&gt;&#39; --actions push --scope drupal-on-azure-custom-image:latest</code></pre></div>\n<ol start=\"3\">\n<li>To test if your webhook is configured properly, ping the webhook and see if you get a 200 OK response.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">eventId=$(az acr webhook ping --name &lt;name-of-webhook&gt; --registry &lt;registry-name&gt; --query id --output tsv)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">az acr webhook list-events --name &lt;name-of-webhook&gt; --registry &lt;registry-name&gt; --query &quot;[?id==&#39;$eventId&#39;].eventResponseMessage&quot;</code></pre></div>\n<h2 id=\"build-pipeline\" style=\"position:relative;\"><a href=\"#build-pipeline\" aria-label=\"build pipeline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build pipeline</h2>\n<p>If we make changes in our Drupal codebase (e.g. we add a module or we change some styling), we need to locally build a new Docker image that we then need to push to our container registry.\nWe can also automate this process with a build pipeline.</p>\n<p>We do this by pushing our codebase to a git repository within Azure DevOps.\nHow exactly to do this can be found here (<a href=\"https://docs.microsoft.com/en-us/azure/devops/repos/git/create-new-repo?view=azure-devops\">https://docs.microsoft.com/en-us/azure/devops/repos/git/create-new-repo?view=azure-devops</a>).</p>\n<p>Besides git repositories, Azure DevOps offers many other services including building and deploying applications using pipelines.\nLet’s create a new pipeline via “Pipelines” > “New pipeline”.\nHere we choose our newly created Azure Git Repo.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.07692307692307%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVQ4y41Uy46bQBDk23PMR+QPLPmQWIocKY598SVaaS/JwTkYWAOG4f0wz4qqN4PWG4M9UqmhGVVXV89gxHGMKIrA2Pc9uIZhGNG27VXu3jI2mw0WiwXW6zW2261gt9thv99juVzCNM3/imjiWwWMpm2RlxWKokCe58iyTCKRpumkqvcFNIz68Az16QPiooJzesHpdBILzuezkNIGtt11nURCW3Oz5Vp5SH7+QFoUCJUa/VRKiUIqTpJkVM9cVVXTCn/7wMctEPkOTMuG67oIgkBAG6bWJGFadvhlFcizFHriVHRrCHNEI+Hpxca3ryv4fiC+eZ4nxPSqrms0TSPxcrkI6OWsQvrhOK60pz176xtz/MZ9fGeBWYW2bePLaiWeWZaF4/EI5nj+fN+XZ9qgld1r22jqGnEUoixLUcPI1tgmVfGZubnJXhEOjoX++2e4SsEyTWmLJJrgkcleEbY0O45RlKX4Rr/eEzLyMD9EGCQVng4KZ8/F4fBHpqynylZZgIN4+Nj0/YCm7carVTfNeES0j8xzM/fc++MYKrvAjUs4kUaBMAxFKc+l4zgSOXHec317ZhV2gv4fXv0Sxd2rcoI5jalfFxX+BXuXJ+Qjz7fhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"New pipeline\"\n        title=\"New pipeline\"\n        src=\"/static/70664155decc0551c82512d9e1ca1ad1/a1792/new-pipeline.png\"\n        srcset=\"/static/70664155decc0551c82512d9e1ca1ad1/cb9a0/new-pipeline.png 195w,\n/static/70664155decc0551c82512d9e1ca1ad1/727ba/new-pipeline.png 390w,\n/static/70664155decc0551c82512d9e1ca1ad1/a1792/new-pipeline.png 780w,\n/static/70664155decc0551c82512d9e1ca1ad1/d9217/new-pipeline.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>New pipeline</p></figcaption>\n  </figure></p>\n<p>A pipeline is nothing more than a set of automated tasks to compile, build and/or deploy code efficiently and reliably.\nAzure DevOps offers a lot of these tasks predefined.\nWe can take advantage of this conveniently.\nBelow, we choose “Docker - Build and push an image to Azure Container Registry” and select the appropriate “Subscription”.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 780px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.97435897435898%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVQ4y42Uu27bQBBF9/97NwbSuPAPuBDkIkGKUPqCNA7ikETEJUUun5L4km5wBxmCMvTwAhdDrbiz584MaPI8hx8E2Gw2OBwOov1+j7quwf/6vgfX6XQS3VvG9//g+7evWCwW8DwPq9UK6/Uay+VS9oIgOEt4T2YEUHQn7Ha7iebj+gzZRNi0Pd5sDucysUirtH08HjGOo0S9ff58lbDet3iLMsTWwjk31XCupmnEgdb4lszu0OF35CRhHMdCmaapKMsyuaQsS0k6DIOUhVHF313XTTJDNyALHWxsYf8nZcdVSZLIi23bTiI1iRlZhrMaDv2IPKlQFIWIhBSpGLmnpNvtVvZ4AckoJpzLjP2IKq7lEA+oeJB0lO6RnqUgnRIqrdZZavjzV4CyLM66qvHaGF2SEHb9gCh2YolUjGqfti8lvTk2bTfgPaSlRJoSRRF835dIManaojindHItsUldjpfFK5q6nqjUug43xRHReGvAjU0SPD0/oywKKTiLTyIO6XxM5gPPBjCy2x9JzV9r8fD4BVmaikXapmXOYBiGQqzDy+SMSn+RkAd+eN70yaKqqhIKPiudEjLe+lj8A8Jw08jEYP2VAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Configure pipeline\"\n        title=\"Configure pipeline\"\n        src=\"/static/3742eb5299753e11d26bcbfb5bdadb92/a1792/configure-pipeline.png\"\n        srcset=\"/static/3742eb5299753e11d26bcbfb5bdadb92/cb9a0/configure-pipeline.png 195w,\n/static/3742eb5299753e11d26bcbfb5bdadb92/727ba/configure-pipeline.png 390w,\n/static/3742eb5299753e11d26bcbfb5bdadb92/a1792/configure-pipeline.png 780w,\n/static/3742eb5299753e11d26bcbfb5bdadb92/d9217/configure-pipeline.png 904w\"\n        sizes=\"(max-width: 780px) 100vw, 780px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\"><p>Configure pipeline</p></figcaption>\n  </figure></p>\n<p>Next, we select our Container Registry and enter the name of our container image.\nFor Dockerfile, you can just leave ”$(Build.SourcesDirectory)/Dockerfile”.\nThe SourcesDirectory here is equal to the root of our codebase where our Dockerfile resides.\nWe then click “Validate and configure”, then “Save and run”.</p>\n<p>To test if our new pipeline is working properly we need to make a change in our codebase (locally).\nE.g. Adding a module in composer.json.\nThese changes we commit and push to our Azure DevOps repository.\nIf all goes well the pipeline has picked up the changes in the repository and is building a new container image which is then pushed to the container registry which is then deployed to our web app.</p>\n<p>So now you have a working Drupal installation running in Azure.</p>","headings":[{"depth":2,"value":"Setup","id":"setup"},{"depth":3,"value":"Database","id":"database"},{"depth":3,"value":"Web app: PHP vs container","id":"web-app-php-vs-container"},{"depth":3,"value":"Container registry","id":"container-registry"},{"depth":3,"value":"Build Docker Image","id":"build-docker-image"},{"depth":3,"value":"Push image to Container Registry","id":"push-image-to-container-registry"},{"depth":3,"value":"Web app","id":"web-app"},{"depth":3,"value":"Database connection","id":"database-connection"},{"depth":3,"value":"Drupal file system","id":"drupal-file-system"},{"depth":3,"value":"Continuous deployment","id":"continuous-deployment"},{"depth":2,"value":"Build pipeline","id":"build-pipeline"}],"frontmatter":{"title":"Drupal in Azure","category":"development","tags":["Drupal","Azure","Cloud","Jamstack"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/1a39723cf289c6247b4ad60046d2bd2e/29a7d/cover.png","srcSet":"/static/1a39723cf289c6247b4ad60046d2bd2e/b2228/cover.png 750w,\n/static/1a39723cf289c6247b4ad60046d2bd2e/29a7d/cover.png 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/1a39723cf289c6247b4ad60046d2bd2e/2db0b/cover.webp 750w,\n/static/1a39723cf289c6247b4ad60046d2bd2e/84fa1/cover.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":null,"date":"August 10, 2023"}},"allMarkdownRemark":{"edges":[{"node":{"id":"d883dd50-1b04-56fe-bd16-194744e1307d","fields":{"authorIds":null,"slug":"/accessibility-improves-UX-and-business-profit/accessibility-improves-UX-and-business-profit/"},"frontmatter":{"date":"2022-05-17T00:00:00.000Z","title":"How good accessibility improves user experiences & business profit","type":"blog","tags":["Accessibility"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAVHIEZf/xAAbEAABBAMAAAAAAAAAAAAAAAAAAREhMQIDEv/aAAgBAQABBQLJR+Sx43wJX//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAEDAQE/AYf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQEABj8CxWauyhH/xAAaEAADAQADAAAAAAAAAAAAAAAAARFBIVGB/9oACAEBAAE/IcG10OSAtKejaJVzg1SIX//aAAwDAQACAAMAAAAQP9//xAAWEQEBAQAAAAAAAAAAAAAAAAABAEH/2gAIAQMBAT8QTEBt/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EDTZW//EABwQAQEAAgMBAQAAAAAAAAAAAAERACExQaFxkf/aAAgBAQABPxBh7GHeYTNo65PtyRAH6xzLgNS5oGKN8w7O1L65/9k="},"images":{"fallback":{"src":"/static/b6f4e68d2043a4226b8e448a5df7f044/585d0/daniel-ali-ju1yFZkrxVg-unsplash.jpg","srcSet":"/static/b6f4e68d2043a4226b8e448a5df7f044/05435/daniel-ali-ju1yFZkrxVg-unsplash.jpg 750w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/81c74/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1080w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/b2594/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1366w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/585d0/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1448w","sizes":"100vw"},"sources":[{"srcSet":"/static/b6f4e68d2043a4226b8e448a5df7f044/15f20/daniel-ali-ju1yFZkrxVg-unsplash.webp 750w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/9a568/daniel-ali-ju1yFZkrxVg-unsplash.webp 1080w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/e2fc4/daniel-ali-ju1yFZkrxVg-unsplash.webp 1366w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/73e27/daniel-ali-ju1yFZkrxVg-unsplash.webp 1448w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6691988950276243}}},"authors":null}}},{"node":{"id":"bfa11ea8-4c20-5537-b7f0-a9ce63544f6b","fields":{"authorIds":["orjan_de_smet"],"slug":"/angular-custom-control/angular-custom-control/"},"frontmatter":{"date":"2020-08-15T00:00:00.000Z","title":"Creating a custom form control in Angular","type":"blog","tags":["Angular"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACyUlEQVQoz03KC0hTYQAF4J/IQDFGFoH5QDCzIgV7qKCUhSsbZqOnUWoiiMNMTcSwyErTTCWEUkvDlppGL8WG6Zybrm3u6Zy67e6O3e3uvubchiaa0ryhEvhxOHDgAOo/kqSIjTgo0uUklhcIzxxJkNRWTtK1dQKCIHBivRwk5pnDPC7cOUtCltmeYff4JOWcxXF880JSpMNMaDffmwBmt2G43Y5hetgxrHA193pyGzwJBXPgNHG3wbLoxhAritptFOYW2l73aetx1IHaUfsGYLLOSXXubr7nGXc2pwY7Vwwfz9ZFXpH7Jo4k542hGIRaCRxxD1lrm8avzUwZUNSOIIh1A+BLbe97jTWtmuLnksz7AhaHF5v+JeJ8JyOuJfRkR7uwosuQ1QuXVskOSxVCFMFg2GQ2w+uBzYDb/bOuqa+06lNGUXv5iz5WdvOh5OqwhMcB0WU7wgvbuD8ax1IKRkGv6A1ipmYgyGiEDJBJbzIbIROormsuefDydn7NxYyKs1fLjzGLwmNzA6OyAg6kg13MytoOg2GC2189ZbDaBR8XP1fojLBZNbbUXWZUjgHOnZL0zPwUdk5C8s2o+MsRMReCI5k798VtZxwBwJ/JTIUg0/SkYVJvkH9rn3+Y+Ptd4UrjDfRpqlwsBKxUdtIZVsyJpLCIo4y9+7f5BADg6+O7JyziYNqt66/a2jRqtUqt0igVEr1F0V5Lc4KXCqNFgzzlNARCQkL9/Bl+/ozAoNDY+FNFnLKe1g86tcKJL9OTi14bpZ2Zlstk4+oJPa9nLS8SyYlyZYQuPWKpJKOAzWZXVj7h8foRxEJ7nSSt+bpGjvyhlZ30UoODhlHIivwSiaTamYn6YtOlIN7AoPBtvSVtt/R7F1iY9whlVr6GpM26v9p7o3TLwCrkXKG93lU9BQ+JRcNDfIl0nWBUzBOIxlVqsVzZzxeIJdJ/8/vhYT3hHxQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/47eb4071e7b4fd828591dc6a4727299b/3b6f5/qyt3dcd64l.png","srcSet":"/static/47eb4071e7b4fd828591dc6a4727299b/3b6f5/qyt3dcd64l.png 500w","sizes":"100vw"},"sources":[{"srcSet":"/static/47eb4071e7b4fd828591dc6a4727299b/b7ca8/qyt3dcd64l.webp 500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":[]}}},{"node":{"id":"a46dec1a-1810-59b6-9a54-4d0dbf056d6e","fields":{"authorIds":["orjan_de_smet"],"slug":"/angular-include-assets-libraries/angular-include-assets-libraries/"},"frontmatter":{"date":"2019-09-13T00:00:00.000Z","title":"Lessons learned on including library assets into Angular applications","type":"blog","tags":["Angular","Builders","Assets","Library","Monorepo"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHRK6oMYz//xAAYEAADAQEAAAAAAAAAAAAAAAABAhARIf/aAAgBAQABBQI8UFtyKoWf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQIQ/9oACAEDAQE/AYqQRM//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8BNX//xAAaEAACAgMAAAAAAAAAAAAAAAABEAARAkGh/9oACAEBAAY/AiZje+OwF//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExQVH/2gAIAQEAAT8hfoBA4yblbS0vFRpBb2Wz/9oADAMBAAIAAwAAABD3L//EABgRAAIDAAAAAAAAAAAAAAAAAAABESFB/9oACAEDAQE/EJKDwo//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAECAQE/EBoRu3//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMWGRcf/aAAgBAQABPxBwtQg8MCFglqiw8rnuI9/G5bkxypZVdqV8izrP/9k="},"images":{"fallback":{"src":"/static/db2bc63b7c104af4e01d98f84cf1f448/5cc6d/tpryd.jpg","srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/5cc6d/tpryd.jpg 500w","sizes":"100vw"},"sources":[{"srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/b7ca8/tpryd.webp 500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":[]}}},{"node":{"id":"8fc38192-40d5-5e5e-8eeb-58da83d2e469","fields":{"authorIds":null,"slug":"/being-productive-with-typescript/being-productive-with-typescript/"},"frontmatter":{"date":"2022-06-08T00:00:00.000Z","title":"Being productive with Typescript","type":"blog","tags":["Typescript","Best practices"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAA//aAAwDAQACEAMQAAABznU7xiAf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAQIAERIQ/9oACAEBAAEFAkAJZRqXU0ef/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAgMAAAAAAAAAAAAAAAAAACEBIDH/2gAIAQEABj8CeCmv/8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQEXH/2gAIAQEAAT8hyMhIDOUJaRSv/9oADAMBAAIAAwAAABB7/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEDAQE/EA24/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAh/9oACAECAQE/EHCf/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIRBRMZGx/9oACAEBAAE/EH9SWdQ4sJQIIun7WHIsdGciQHqlj//Z"},"images":{"fallback":{"src":"/static/0ef7c409e0c579c3893684bfac9eb1a7/e0c47/banner.jpg","srcSet":"/static/0ef7c409e0c579c3893684bfac9eb1a7/19708/banner.jpg 750w,\n/static/0ef7c409e0c579c3893684bfac9eb1a7/e0c47/banner.jpg 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/0ef7c409e0c579c3893684bfac9eb1a7/c0046/banner.webp 750w,\n/static/0ef7c409e0c579c3893684bfac9eb1a7/c2b28/banner.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":null}}},{"node":{"id":"f8129530-ed91-5c32-8a14-06dd0f8775b7","fields":{"authorIds":[],"slug":"/designing-the-design-process/designing-the-design-process/"},"frontmatter":{"date":"2019-12-23T00:00:00.000Z","title":"Designing the design process","type":"blog","tags":["Design process"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQY032RzU7DMBCE8/5vxQ0JqQcqKlEJSqH5aYhrZx3ba3t3jWIIJ8Qny9qDx6uZacqG1MMVYc4sNguLlL8glhhTQ0SrsgoKcxFhoiJsHb5fwYVYCotw/XlbU2HmBhz6RCFxSIxZHFLMnIkDZgPOY8okmdjHhJnnBdtBafA+ErE0x8HdHcan3u275bG19y+30+R6HZRLnQ4jYK9Dd/P7C+w+YPc2r48H93CGwabGIvXGGySb5Qr+8NqOECDyHMkgzZGmBVsFytjzpU85r9FsDhoISfsMSMZnE/KMZCMDEqzDekMkTwUxGQPMUqRUw6vtZlJWGz9OYGY/qeXSKYzpN5UfeI1dasjEsjUjzXdJsQo+lX4+nlJK5V+U5rZnM/MXPUvPVJjy2+cAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/267f0a920cea0607f3e61217bc86b013/d2a4e/1_0efMr1b_peoGJtTjTFK7Gg.png","srcSet":"/static/267f0a920cea0607f3e61217bc86b013/2de81/1_0efMr1b_peoGJtTjTFK7Gg.png 750w,\n/static/267f0a920cea0607f3e61217bc86b013/d2a4e/1_0efMr1b_peoGJtTjTFK7Gg.png 939w","sizes":"100vw"},"sources":[{"srcSet":"/static/267f0a920cea0607f3e61217bc86b013/adb52/1_0efMr1b_peoGJtTjTFK7Gg.webp 750w,\n/static/267f0a920cea0607f3e61217bc86b013/c3e93/1_0efMr1b_peoGJtTjTFK7Gg.webp 939w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.40149094781682637}}},"authors":[]}}}]}},"pageContext":{"slug":"/drupal-in-azure/drupal-in-azure/"}},"staticQueryHashes":["1274017682"]}
{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/lessons-learned-on-including-library-assets-into-angular-applications/","result":{"data":{"site":{"siteMetadata":{"title":"Ordina Bold Tech & Design Blog","configs":{"countOfInitialPost":10}}},"markdownRemark":{"id":"a46dec1a-1810-59b6-9a54-4d0dbf056d6e","excerpt":"With Angular 6, which has now been released ages ago, workspaces were introduced. This meant that a repository could include multiple applications and libraries, eventually building a monorepository. I welcomed this change, as it meant that all applications in one repositoryâ€¦","html":"<p>With Angular 6, which has now been released ages ago, workspaces were introduced. This meant that a repository could include multiple applications and libraries, eventually building a monorepository. I welcomed this change, as it meant that all applications in one repository could be kept up to date easily and more. But Iâ€™m not here to talk about all the advantages and disadvantages of a monorepo. Instead Iâ€™d like to talk about one specific challenge with this type of repository.</p>\n<h2 id=\"how-to-include-assets-used-by-libraries\" style=\"position:relative;\"><a href=\"#how-to-include-assets-used-by-libraries\" aria-label=\"how to include assets used by libraries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to include assets used by libraries</h2>\n<p>There are multiple solutions to this problem. But not all solutions match all criteria for a good architecture. These criteria are:</p>\n<ul>\n<li>Assets should exist only once, preferably in the project that utilizes them.</li>\n<li>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</li>\n<li>A dependency on another library should be added with minimal change and with minimal affected projects.</li>\n</ul>\n<p>I havenâ€™t worked with many monorepo tools, other than <a href=\"https://nx.dev\">Nrwl/nx</a>, so I will base my definition of affected projects on that. Nrwl/nx uses a dependency graph to determine the affected projects. In short: if a library has a changed file, then all projects that import this library (either directly or lazy-loaded) are affected. This works recursively, so the projects that import those projectes are also affected and so on. Some files, like <code class=\"language-text\">package.json</code> and <code class=\"language-text\">angular.json</code> have <code class=\"language-text\">implicitDependencies</code> set to <code class=\"language-text\">\"*\"</code>, which means a change in those files will regard all projects in the workspace as affected.</p>\n<p>These are the solutions (in order) Iâ€™ve gone through to tackle this exact problem for a monorepo Iâ€™m currently managing.</p>\n<p><em>Note: In that monorepo the focus was on json-files with translations used for <code class=\"language-text\">@ngx-translate</code>, but in my examples here I will use images.</em>\n<em>In the example, the application, my-app, only depends on the library neighbourhood-dogs-lib and should only display a picture of my dog and Peteâ€™s dog, but not of Karenâ€™s cat.</em></p>\n<h3 id=\"solution-1---assets-in-the-application-source\" style=\"position:relative;\"><a href=\"#solution-1---assets-in-the-application-source\" aria-label=\"solution 1   assets in the application source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution 1 - Assets in the application source</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">â”œâ”€ ğŸ“‚ apps\nâ”‚  â””â”€ ğŸ“‚ my-app\nâ”‚     â”œâ”€ ğŸ“‚ src\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ assets\nâ”‚     â”‚  â”‚  â””â”€ ğŸ“‚ images\nâ”‚     â”‚  â”‚     â”œâ”€ ğŸ–¼ my-dog.jpg\nâ”‚     â”‚  â”‚     â””â”€ ğŸ–¼ pete-dog.jpg\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ app\nâ”‚     â”‚  â”‚  â””â”€ ...\nâ”‚     â”‚  â”œâ”€ ğŸ“„ index.html\nâ”‚     â”‚  â””â”€ ...\nâ”‚     â””â”€ ...\nâ””â”€ ğŸ“‚ libs\n   â”œâ”€ ğŸ“‚ neighbourhood-dogs-lib\n   â”‚  â”œâ”€ ğŸ“‚ src\n   â”‚  â”‚  â”œâ”€ ğŸ“‚ lib\n   â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„ dog-list.component.ts\n   â”‚  â”‚  â”‚  â””â”€ ğŸ“„ dog.component.ts\n   â”‚  â”‚  â””â”€ ...\n   â”‚  â””â”€ ...\n   â””â”€ ğŸ“‚ neighbourhood-cats-lib\n      â”œâ”€ ğŸ“‚ src\n      â”‚  â”œâ”€ ğŸ“‚ lib\n      â”‚  â”‚  â”œâ”€ ğŸ“„ cat-list.component.ts\n      â”‚  â”‚  â””â”€ ğŸ“„ cat.component.ts\n      â”‚  â””â”€ ...\n      â””â”€ ...</code></pre></div>\n<p>I call this solution the â€œIâ€™ll figure it out laterâ€-solution. The main idea was to set aside this problem because other tasks had higher priority, the monorepo wasnâ€™t nearly as big as it is now. Basically, the assets used by a library were put in the <code class=\"language-text\">assets</code> folder of the applicationâ€™s source directory. This meant that the build of an application would simply include these assets out of the box. This is fine for a single application, but as soon as a second application (letâ€™s say, neighbourhood-animals-app) was to use this library, it, too, would need a copy of those assets in its source directory. A change to one of the assets would also mean that two applications would need this change, which is prone to being forgotten. Moreover, the image of Karenâ€™s cat is nowhere to be found because at this time, no application needs it.</p>\n<p><strong>As for the criteria:</strong></p>\n<!-- |   |   |\n|-------------|-------------|\n| Assets should exist only once, preferably in the project that utilizes them. | âŒ |\n| An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those. | âš ï¸* |\n| A dependency on another library should be added with minimal change and with minimal affected projects. | âš ï¸** | -->\n<table>\n  <tr><td>Assets should exist only once, preferably in the project that utilizes them.</td><td>âŒ</td></tr>\n  <tr><td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td><td>âš ï¸*</td></tr>\n  <tr><td>A dependency on another library should be added with minimal change and with minimal affected projects.</td><td>âš ï¸**</td></tr>\n</table>\n<p>(*) Kind of, if I donâ€™t forget to copy our assets</br>\n(**) Depends on the amount of applications that need these extra assets</p>\n<!-- [^1]: Kind of, if I don't forget to copy our assets\n[^2]: Depends on the amount of applications that need these extra assets -->\n<h3 id=\"solution-2---shared-assets-directory\" style=\"position:relative;\"><a href=\"#solution-2---shared-assets-directory\" aria-label=\"solution 2   shared assets directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution 2 - Shared assets directory</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">â”œâ”€ ğŸ“‚ apps\nâ”‚  â””â”€ ğŸ“‚ my-app\nâ”‚     â”œâ”€ ğŸ“‚ src\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ app\nâ”‚     â”‚  â”‚  â””â”€ ...\nâ”‚     â”‚  â”œâ”€ ğŸ“„ index.html\nâ”‚     â”‚  â””â”€ ...\nâ”‚     â””â”€ ...\nâ”œâ”€ ğŸ“‚ libs\nâ”‚  â”œâ”€ ğŸ“‚ neighbourhood-dogs-lib\nâ”‚  â”‚  â”œâ”€ ğŸ“‚ src\nâ”‚  â”‚  â”‚  â”œâ”€ ğŸ“‚ lib\nâ”‚  â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„ dog-list.component.ts\nâ”‚  â”‚  â”‚  â”‚  â””â”€ ğŸ“„ dog.component.ts\nâ”‚  â”‚  â”‚  â””â”€ ...\nâ”‚  â”‚  â””â”€ ...\nâ”‚  â””â”€ ğŸ“‚ neighbourhood-cats-lib\nâ”‚     â”œâ”€ ğŸ“‚ src\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ lib\nâ”‚     â”‚  â”‚  â”œâ”€ ğŸ“„ cat-list.component.ts\nâ”‚     â”‚  â”‚  â””â”€ ğŸ“„ cat.component.ts\nâ”‚     â”‚  â””â”€ ...\nâ”‚     â””â”€ ...\nâ””â”€ ğŸ“‚ shared-assets\n   â””â”€ ğŸ“‚ images\n      â”œâ”€ ğŸ–¼ my-dog.jpg\n      â”œâ”€ ğŸ–¼ pete-dog.jpg\n      â””â”€ ğŸ–¼ karen-cat.jpg</code></pre></div>\n<p>This is the â€œShare everythingâ€-solution. It was created to solve the main fault of the previous, namely that assets could exist twice. Another important aspect here was to reduce the amount of times that <code class=\"language-text\">angular.json</code> would be changed when more assets from another library would be added. Because <code class=\"language-text\">angular.json</code> implicitly affects all projects, this file should be kept untouched as much as possible. So a one-time change was made to let the projects in <code class=\"language-text\">angular.json</code> include these shared assets:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./shared-assets/images\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets/images\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Unfortunately this meant that all assets from all libraries would be added to those applications, which increases the bundle size significantly. Another disadvantage is that the Nx dependency graph could not link changes in this directory with their corresponding libraries, unless every single file was mentioned in <code class=\"language-text\">nx.json</code> with an implicit dependency for that library. Ironically, this solves criteria 3 perfectly, because nothing is affected, so thatâ€™s the bare minimum.</p>\n<p><strong>As for the criteria:</strong></p>\n<!-- |    |    |\n|-------------|-------------|\n| Assets should exist only once, preferably in the project that utilizes them. | âš ï¸* |\n| An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those. | âŒ |\n| A dependency on another library should be added with minimal change and with minimal affected projects. | âœ… | -->\n<table>\n  <tr><td>Assets should exist only once, preferably in the project that utilizes them.</td><td>âš ï¸* </td></tr>\n  <tr><td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td><td>âŒ</td></tr>\n  <tr><td>A dependency on another library should be added with minimal change and with minimal affected projects.</td><td>âœ…</td></tr>\n</table>\n<p>(*) There are no longer duplicate assets, but theyâ€™re not part of the project that utilizes them</p>\n<h3 id=\"solution-3---custom-angular-builders\" style=\"position:relative;\"><a href=\"#solution-3---custom-angular-builders\" aria-label=\"solution 3   custom angular builders permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution 3 - Custom Angular builders</h3>\n<p>A solution I came across was to copy the assets after a build into the <code class=\"language-text\">dist</code>-folder using a script in the <code class=\"language-text\">package.json</code> file, but for obvious reasons that wouldnâ€™t work easily when managing different apps. Neither would it work with the dev-server, so I didnâ€™t even go there. Including assets by adding them to the build targetâ€™s assets array is how Angular itself prescribes to solve this problem, so letâ€™s keep that. However, I still wanted to change the <code class=\"language-text\">angular.json</code> file (and other files) as minimally as possible.</p>\n<p>Enter Angular 8 and the stable version of the CLI Builder API!</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">â”œâ”€ ğŸ“‚ apps\nâ”‚  â””â”€ ğŸ“‚ my-app\nâ”‚     â”œâ”€ ğŸ“‚ src\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ assets\nâ”‚     â”‚  â”‚  â””â”€ ğŸ“„ include.json\nâ”‚     â”‚  â”œâ”€ ğŸ“‚ app\nâ”‚     â”‚  â”‚  â””â”€ ...\nâ”‚     â”‚  â”œâ”€ ğŸ“„ index.html\nâ”‚     â”‚  â””â”€ ...\nâ”‚     â””â”€ ...\nâ””â”€ ğŸ“‚ libs\n   â”œâ”€ ğŸ“‚ neighbourhood-dogs-lib\n   â”‚  â”œâ”€ ğŸ“‚ src\n   â”‚  â”‚  â”œâ”€ ğŸ“‚ assets\n   â”‚  â”‚  â”‚  â””â”€ ğŸ“‚ images\n   â”‚  â”‚  â”‚     â”œâ”€ ğŸ–¼ my-dog.jpg\n   â”‚  â”‚  â”‚     â””â”€ ğŸ–¼ pete-dog.jpg\n   â”‚  â”‚  â”œâ”€ ğŸ“‚ lib\n   â”‚  â”‚  â”‚  â”œâ”€ ğŸ“„ dog-list.component.ts\n   â”‚  â”‚  â”‚  â””â”€ ğŸ“„ dog.component.ts\n   â”‚  â”‚  â””â”€ ...\n   â”‚  â””â”€ ...\n   â””â”€ ğŸ“‚ neighbourhood-cats-lib\n      â”œâ”€ ğŸ“‚ src\n      â”‚  â”œâ”€ ğŸ“‚ assets\n      â”‚  â”‚  â””â”€ ğŸ“‚ images\n      â”‚  â”‚     â””â”€ ğŸ–¼ karen-cat.jpg\n      â”‚  â”œâ”€ ğŸ“‚ lib\n      â”‚  â”‚  â”œâ”€ ğŸ“„ cat-list.component.ts\n      â”‚  â”‚  â””â”€ ğŸ“„ cat.component.ts\n      â”‚  â””â”€ ...\n      â””â”€ ...</code></pre></div>\n<p>Using this new API, I was able to construct two new builders to replace the default <code class=\"language-text\">@angular-devkit/build-angular:browser</code> and <code class=\"language-text\">@angular-devkit/build-angular:dev-server</code> while still utilizing them. These custom builders take the same options as the ones they replace and work more like a hook than a new builder. The idea is to update the build target in the in-memory workspace before the default builder is actually executed. Simply put, the custom builders read <code class=\"language-text\">angular.json</code>, update the assets array and pass the updated version to the original builders. A single configuration file (<code class=\"language-text\">include.json</code> in the applicationâ€™s <code class=\"language-text\">assets</code> directory) lets the custom builder read which libraries the application depends on. It then determines its source directory using the workspace configuration file (<code class=\"language-text\">angular.json</code>) and adds the following to the assets array:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./libs/neighbourhood-dogs-lib/src/assets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If I wanted my-app to also include the neighbourhoodâ€™s cats, then I could change <code class=\"language-text\">include.json</code> to also include <code class=\"language-text\">neighbourhood-cats-lib</code> and the next build would add the following to the assets array:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./libs/neighbourhood-dogs-lib/src/assets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./libs/neighbourhood-cats-lib/src/assets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Though Iâ€™d rather set the option that these assets are placed in sub folders, so I added that into the builders too. That made the assets array into the following, which prevents libs from overwriting other assets:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./libs/neighbourhood-dogs-lib/src/assets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets/neighbourhood-dogs-lib\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"glob\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"**/*\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"input\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./libs/neighbourhood-cats-lib/src/assets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"output\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./assets/neighbourhood-cats-lib\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>Note: The reason this <code class=\"language-text\">include.json</code> file is in the <code class=\"language-text\">assets</code> directory was to make a custom <code class=\"language-text\">HttpTranslateLoader</code> (using a simple RxJS <code class=\"language-text\">mergeMap</code> and <code class=\"language-text\">forkJoin</code>) read that same file to determine which translation assets to download.</em></p>\n<p><strong>Letâ€™s go through the criteria one more time:</strong></p>\n<!-- |    |    |\n|-------------|-------------|\n| Assets should exist only once, preferably in the project that utilizes them. | âœ… |\n| An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.| âœ…* |\n| A dependency on another library should be added with minimal change and with minimal affected projects. | âœ… | -->\n<table>\n  <tr><td>Assets should exist only once, preferably in the project that utilizes them.</td><td>âœ…</td></tr>\n  <tr><td>An update on an asset should trigger the rebuild of all those applications depending on the library using the asset, and only those.</td><td>âœ…*</td></tr>\n  <tr><td>A dependency on another library should be added with minimal change and with minimal affected projects.</td><td>âœ…</td></tr>\n</table>\n<p>(*) Because the assets are inside the libraryâ€™s directory, the dependency graph can detect a change and determine the affected applications</p>\n<p>There is one caveat though: the dependency graph will only detect dependencies if the library is also imported in the code of the application, which would be the case mostly. If thatâ€™s not the case (for example if the library containing assets has no components/services/modules/â€¦), simply create an empty module in it and import it in the applications that depend on these assets.</p>\n<h2 id=\"sharing-is-caring\" style=\"position:relative;\"><a href=\"#sharing-is-caring\" aria-label=\"sharing is caring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sharing is caring</h2>\n<p>Because I care about the community I packaged this solution and published it to npm. Itâ€™s called <code class=\"language-text\">ngx-library-assets</code> and is available at <a href=\"https://www.npmjs.com/package/ngx-library-assets\">https://www.npmjs.com/package/ngx-library-assets</a>. Install it as a <code class=\"language-text\">devDependency</code>.</p>\n<p><em>Disclaimer: I do not actually own a dog, or a cat. Neither do Pete and Karen. I donâ€™t even have any neighbours named Pete or Karen.</em></p>","headings":[{"depth":2,"value":"How to include assets used by libraries","id":"how-to-include-assets-used-by-libraries"},{"depth":3,"value":"Solution 1 - Assets in the application source","id":"solution-1---assets-in-the-application-source"},{"depth":3,"value":"Solution 2 - Shared assets directory","id":"solution-2---shared-assets-directory"},{"depth":3,"value":"Solution 3 - Custom Angular builders","id":"solution-3---custom-angular-builders"},{"depth":2,"value":"Sharing is caring","id":"sharing-is-caring"}],"frontmatter":{"title":"Lessons learned on including library assets into Angular applications","category":"Angular","tags":["Angular","Builders","Assets","Library","Monorepo"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#88b8d8","images":{"fallback":{"src":"/static/db2bc63b7c104af4e01d98f84cf1f448/a2f51/tpryd.jpg","srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/a2f51/tpryd.jpg 500w","sizes":"100vw"},"sources":[{"srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/19135/tpryd.webp 500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":[],"date":"September 13, 2019"}},"allMarkdownRemark":{"edges":[{"node":{"id":"d883dd50-1b04-56fe-bd16-194744e1307d","fields":{"authorIds":null,"slug":"/accessibility-improves-UX-and-business-profit/accessibility-improves-UX-and-business-profit/"},"frontmatter":{"date":"2022-05-17T00:00:00.000Z","title":"How good accessibility improves user experiences & business profit","type":"blog","tags":["Accessibility"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgAB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAVHIEZf/xAAbEAABBAMAAAAAAAAAAAAAAAAAAREhMQIDEv/aAAgBAQABBQLJR+Sx43wJX//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAEDAQE/AYf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQEABj8CxWauyhH/xAAaEAADAQADAAAAAAAAAAAAAAAAARFBIVGB/9oACAEBAAE/IcG10OSAtKejaJVzg1SIX//aAAwDAQACAAMAAAAQP9//xAAWEQEBAQAAAAAAAAAAAAAAAAABAEH/2gAIAQMBAT8QTEBt/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAECAQE/EDTZW//EABwQAQEAAgMBAQAAAAAAAAAAAAERACExQaFxkf/aAAgBAQABPxBh7GHeYTNo65PtyRAH6xzLgNS5oGKN8w7O1L65/9k="},"images":{"fallback":{"src":"/static/b6f4e68d2043a4226b8e448a5df7f044/585d0/daniel-ali-ju1yFZkrxVg-unsplash.jpg","srcSet":"/static/b6f4e68d2043a4226b8e448a5df7f044/05435/daniel-ali-ju1yFZkrxVg-unsplash.jpg 750w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/81c74/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1080w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/b2594/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1366w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/585d0/daniel-ali-ju1yFZkrxVg-unsplash.jpg 1448w","sizes":"100vw"},"sources":[{"srcSet":"/static/b6f4e68d2043a4226b8e448a5df7f044/15f20/daniel-ali-ju1yFZkrxVg-unsplash.webp 750w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/9a568/daniel-ali-ju1yFZkrxVg-unsplash.webp 1080w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/e2fc4/daniel-ali-ju1yFZkrxVg-unsplash.webp 1366w,\n/static/b6f4e68d2043a4226b8e448a5df7f044/73e27/daniel-ali-ju1yFZkrxVg-unsplash.webp 1448w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6691988950276243}}},"authors":null}}},{"node":{"id":"bfa11ea8-4c20-5537-b7f0-a9ce63544f6b","fields":{"authorIds":["orjan_de_smet"],"slug":"/angular-custom-control/angular-custom-control/"},"frontmatter":{"date":"2020-08-15T00:00:00.000Z","title":"Creating a custom form control in Angular","type":"blog","tags":["Angular"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACyUlEQVQoz03KC0hTYQAF4J/IQDFGFoH5QDCzIgV7qKCUhSsbZqOnUWoiiMNMTcSwyErTTCWEUkvDlppGL8WG6Zybrm3u6Zy67e6O3e3uvubchiaa0ryhEvhxOHDgAOo/kqSIjTgo0uUklhcIzxxJkNRWTtK1dQKCIHBivRwk5pnDPC7cOUtCltmeYff4JOWcxXF880JSpMNMaDffmwBmt2G43Y5hetgxrHA193pyGzwJBXPgNHG3wbLoxhAritptFOYW2l73aetx1IHaUfsGYLLOSXXubr7nGXc2pwY7Vwwfz9ZFXpH7Jo4k542hGIRaCRxxD1lrm8avzUwZUNSOIIh1A+BLbe97jTWtmuLnksz7AhaHF5v+JeJ8JyOuJfRkR7uwosuQ1QuXVskOSxVCFMFg2GQ2w+uBzYDb/bOuqa+06lNGUXv5iz5WdvOh5OqwhMcB0WU7wgvbuD8ax1IKRkGv6A1ipmYgyGiEDJBJbzIbIROormsuefDydn7NxYyKs1fLjzGLwmNzA6OyAg6kg13MytoOg2GC2189ZbDaBR8XP1fojLBZNbbUXWZUjgHOnZL0zPwUdk5C8s2o+MsRMReCI5k798VtZxwBwJ/JTIUg0/SkYVJvkH9rn3+Y+Ptd4UrjDfRpqlwsBKxUdtIZVsyJpLCIo4y9+7f5BADg6+O7JyziYNqt66/a2jRqtUqt0igVEr1F0V5Lc4KXCqNFgzzlNARCQkL9/Bl+/ozAoNDY+FNFnLKe1g86tcKJL9OTi14bpZ2Zlstk4+oJPa9nLS8SyYlyZYQuPWKpJKOAzWZXVj7h8foRxEJ7nSSt+bpGjvyhlZ30UoODhlHIivwSiaTamYn6YtOlIN7AoPBtvSVtt/R7F1iY9whlVr6GpM26v9p7o3TLwCrkXKG93lU9BQ+JRcNDfIl0nWBUzBOIxlVqsVzZzxeIJdJ/8/vhYT3hHxQAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/47eb4071e7b4fd828591dc6a4727299b/3b6f5/qyt3dcd64l.png","srcSet":"/static/47eb4071e7b4fd828591dc6a4727299b/3b6f5/qyt3dcd64l.png 500w","sizes":"100vw"},"sources":[{"srcSet":"/static/47eb4071e7b4fd828591dc6a4727299b/b7ca8/qyt3dcd64l.webp 500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":[]}}},{"node":{"id":"a46dec1a-1810-59b6-9a54-4d0dbf056d6e","fields":{"authorIds":["orjan_de_smet"],"slug":"/angular-include-assets-libraries/angular-include-assets-libraries/"},"frontmatter":{"date":"2019-09-13T00:00:00.000Z","title":"Lessons learned on including library assets into Angular applications","type":"blog","tags":["Angular","Builders","Assets","Library","Monorepo"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHRK6oMYz//xAAYEAADAQEAAAAAAAAAAAAAAAABAhARIf/aAAgBAQABBQI8UFtyKoWf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQIQ/9oACAEDAQE/AYqQRM//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8BNX//xAAaEAACAgMAAAAAAAAAAAAAAAABEAARAkGh/9oACAEBAAY/AiZje+OwF//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExQVH/2gAIAQEAAT8hfoBA4yblbS0vFRpBb2Wz/9oADAMBAAIAAwAAABD3L//EABgRAAIDAAAAAAAAAAAAAAAAAAABESFB/9oACAEDAQE/EJKDwo//xAAXEQEBAQEAAAAAAAAAAAAAAAABABEh/9oACAECAQE/EBoRu3//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMWGRcf/aAAgBAQABPxBwtQg8MCFglqiw8rnuI9/G5bkxypZVdqV8izrP/9k="},"images":{"fallback":{"src":"/static/db2bc63b7c104af4e01d98f84cf1f448/5cc6d/tpryd.jpg","srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/5cc6d/tpryd.jpg 500w","sizes":"100vw"},"sources":[{"srcSet":"/static/db2bc63b7c104af4e01d98f84cf1f448/b7ca8/tpryd.webp 500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":[]}}},{"node":{"id":"8fc38192-40d5-5e5e-8eeb-58da83d2e469","fields":{"authorIds":null,"slug":"/being-productive-with-typescript/being-productive-with-typescript/"},"frontmatter":{"date":"2022-06-08T00:00:00.000Z","title":"Being productive with Typescript","type":"blog","tags":["Typescript","Best practices"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAA//aAAwDAQACEAMQAAABznU7xiAf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAQIAERIQ/9oACAEBAAEFAkAJZRqXU0ef/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAgMAAAAAAAAAAAAAAAAAACEBIDH/2gAIAQEABj8CeCmv/8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQEXH/2gAIAQEAAT8hyMhIDOUJaRSv/9oADAMBAAIAAwAAABB7/wD/xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEDAQE/EA24/8QAFhEBAQEAAAAAAAAAAAAAAAAAERAh/9oACAECAQE/EHCf/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIRBRMZGx/9oACAEBAAE/EH9SWdQ4sJQIIun7WHIsdGciQHqlj//Z"},"images":{"fallback":{"src":"/static/0ef7c409e0c579c3893684bfac9eb1a7/e0c47/banner.jpg","srcSet":"/static/0ef7c409e0c579c3893684bfac9eb1a7/19708/banner.jpg 750w,\n/static/0ef7c409e0c579c3893684bfac9eb1a7/e0c47/banner.jpg 1000w","sizes":"100vw"},"sources":[{"srcSet":"/static/0ef7c409e0c579c3893684bfac9eb1a7/c0046/banner.webp 750w,\n/static/0ef7c409e0c579c3893684bfac9eb1a7/c2b28/banner.webp 1000w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.586}}},"authors":null}}},{"node":{"id":"f8129530-ed91-5c32-8a14-06dd0f8775b7","fields":{"authorIds":[],"slug":"/designing-the-design-process/designing-the-design-process/"},"frontmatter":{"date":"2019-12-23T00:00:00.000Z","title":"Designing the design process","type":"blog","tags":["Design process"],"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQY032RzU7DMBCE8/5vxQ0JqQcqKlEJSqH5aYhrZx3ba3t3jWIIJ8Qny9qDx6uZacqG1MMVYc4sNguLlL8glhhTQ0SrsgoKcxFhoiJsHb5fwYVYCotw/XlbU2HmBhz6RCFxSIxZHFLMnIkDZgPOY8okmdjHhJnnBdtBafA+ErE0x8HdHcan3u275bG19y+30+R6HZRLnQ4jYK9Dd/P7C+w+YPc2r48H93CGwabGIvXGGySb5Qr+8NqOECDyHMkgzZGmBVsFytjzpU85r9FsDhoISfsMSMZnE/KMZCMDEqzDekMkTwUxGQPMUqRUw6vtZlJWGz9OYGY/qeXSKYzpN5UfeI1dasjEsjUjzXdJsQo+lX4+nlJK5V+U5rZnM/MXPUvPVJjy2+cAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/267f0a920cea0607f3e61217bc86b013/d2a4e/1_0efMr1b_peoGJtTjTFK7Gg.png","srcSet":"/static/267f0a920cea0607f3e61217bc86b013/2de81/1_0efMr1b_peoGJtTjTFK7Gg.png 750w,\n/static/267f0a920cea0607f3e61217bc86b013/d2a4e/1_0efMr1b_peoGJtTjTFK7Gg.png 939w","sizes":"100vw"},"sources":[{"srcSet":"/static/267f0a920cea0607f3e61217bc86b013/adb52/1_0efMr1b_peoGJtTjTFK7Gg.webp 750w,\n/static/267f0a920cea0607f3e61217bc86b013/c3e93/1_0efMr1b_peoGJtTjTFK7Gg.webp 939w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.40149094781682637}}},"authors":[]}}}]}},"pageContext":{"slug":"/angular-include-assets-libraries/angular-include-assets-libraries/"}},"staticQueryHashes":["1274017682"]}